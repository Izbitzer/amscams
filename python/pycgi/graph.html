<head>
	<script src="/js/plotly-latest.min.js"></script>
</head>
<body style="margin:0;padding:0;background:transparent">
<div id="graph" style="width:100%; margin: 0 auto" ></div>
</body>

<script>
function getQueryVariable(variable) {
   var query = window.location.search.substring(1);
   var vars = query.split("&");
   for (var i=0;i<vars.length;i++) {
      var pair = vars[i].split("=");
      if(pair[0] == variable){return pair[1];}
   }
   return(false);
}

all_data = {
   'title': getQueryVariable("title")?getQueryVariable("title").replace(/_/g, ' '):'No Title',        // Main Title
   'x_title': getQueryVariable("xat")?getQueryVariable("xat").replace(/_/g, ' '):'',                  // Title for X
   'y_title': getQueryVariable("yat")?getQueryVariable("yat").replace(/_/g, ' '):'',                  // Title for Y
   'x1_vals': getQueryVariable("x1_vals")?getQueryVariable("x1_vals").split(","):'',                  // X Values
   'y1_vals': getQueryVariable("y1_vals")?getQueryVariable("y1_vals").split(","):'',                  // Y Values
   'x_texts': getQueryVariable("tx1")?getQueryVariable("tx1").split(","):'',                          // Name of the X values (?)
   'y_texts': getQueryVariable("ty1")?getQueryVariable("ty1").split(","):'',                          // Name of the Y values (?)
   't1d': getQueryVariable("t1d")?getQueryVariable("t1d"):"points",                                   // Type of line 1
   't2d': getQueryVariable("t2d")?getQueryVariable("t2d"):"fit",                                      // Type of line 2
   'wtf' : getQueryVariable("ry"),                                                                    // No fucking clue
}

// Build the graph based on options
var trace1 = {
  x: all_data.x1_vals,
  y: all_data.y1_vals, 
  mode: 'lines+markers',
  type: 'scatter'
};

var layout = {
   title: {
      text: all_data.title, 
      font: {  color:'#ffffff' },
      xref: 'x',   
      yref: 'y',  
      x: 0.05, 
   },
   height: 517,
   width: 937,
   paper_bgcolor: "rgba(9,29,63,1)",  // For exporting in PNG!
   plot_bgcolor: "rgba(9,29,63,1)",   // For exporting in PNG!
   xaxis:{
         autorange: true,
         zerolinecolor: 'rgba(255,255,255,.8)', 
         zerolinewidth: 1,
         gridcolor: 'rgba(255,255,255,.5)', 
         linecolor: 'rgba(255,255,255,.8)',  
         title: { font: { size: 15, color: '#b1b1b1' } } 
   },
   yaxis:{
         zerolinecolor: 'rgba(255,255,255,.8)', 
         zerolinewidth: 1, 
         gridcolor: 'rgba(255,255,255,.5)', 
         linecolor: 'rgba(255,255,255,.8)',
         title: { font: {  size: 15, color: '#b1b1b1' }},
         autorange: 'reversed',
         //scaleanchor: "x"
   },
   showlegend: false
}

var data = [trace1];
Plotly.newPlot("graph", data, layout, {responsive: true});

/*

if (ry != false) {
   
}
else {

   var layout = {
  title: {
    text: plot_title,
    font: { 
      size: 24
    },
    xref: 'paper',
    x: 0.05,
  },
       height: 517,
       width: 920,
       xaxis:{
       title: {
            text: xat,
            font: { 
               size: 18,
               color: '#7f7f7f'
            }
          },

           side:'left'
       },
       yaxis:{
           title: {
             text: yat,
             font: { 
               size: 18,
               color: '#7f7f7f'
             }
           },

           side: 'right'
       }
   }

}
*/
Plotly.newPlot("graph", data, layout, {responsive: true}) 
/*if (tx1 != false) {
   Plotly.addTraces("myDiv", trace2)
   
if (tx1 != false) {
   tx1a = tx1.split(",")
   ty1a = ty1.split(",")
   var trace2 = {
      x: tx1a,
      y: ty1a,
      mode: 'lines',
      type: 'scatter',
      name: t2d,
      yaxis: "x2"
   };

   console.log('HERE');
}
}*/
</script>
