<head> 
   <script src="/pycgi/dist/js/amscam.min.js"></script>

</head>
<body style="margin:0;padding:0;background:transparent">
<div id="graph" style="width:100%; margin: 0 auto" ></div>
</body>

<script>

// HEx to RGBA 
function hexToRgb(hex) {
    var bigint = parseInt(hex, 16);
    var r = (bigint >> 16) & 255;
    var g = (bigint >> 8) & 255;
    var b = bigint & 255;
    return r + "," + g + "," + b + ",1";
}
 

// GET ALL QUERY PARAMETERS 
function getQueryParams(qs) {
    qs = qs.split("+").join(" ");
    var params = {},
        tokens,
        re = /[?&]?([^=]+)=([^&]*)/g;

    while (tokens = re.exec(qs)) {
        params[decodeURIComponent(tokens[1])]  = decodeURIComponent(tokens[2]);
    }

    return params;
}

var all_variables = getQueryParams(document.location.search);
var all_data;


// Do we have a json_file
if(typeof all_variables['json_file']!='undefined') {
   // We parse the JSON File
   $.ajax({
      dataType: "json",
      url:  all_variables['json_file'],
      success: function(data) {
         all_data = data;
          
         console.log("ALL DATA");
         console.log(all_data);

         console.log("NOW LOAD SCRIPT:");
         console.log(all_variables['graph_config'])

         // We get the corresponding graph layout definition
         if(typeof all_variables['graph_config']!='undefined') {
            console.log(all_variables['graph_config']);
            $.getScript(all_variables['graph_config'], function( d, textStatus, jqxhr ) {
               console.log( "Load was performed." );
            });

         
         }

      }
   });
}


</script>
