<head>
	<script src="/js/plotly-latest.min.js"></script>
</head>
<body style="margin:0;padding:0;background:transparent">
<div id="myDiv" ></div>
</body>

<script>
function getQueryVariable(variable) {
   var query = window.location.search.substring(1);
   var vars = query.split("&");
   for (var i=0;i<vars.length;i++) {
      var pair = vars[i].split("=");
      if(pair[0] == variable){return pair[1];}
   }
   return(false);
}

plot_title = getQueryVariable("plot_title").replace(/_/g, ' '); // Graph Name
xat = getQueryVariable("xat")  // Text X
yat = getQueryVariable("yat")  // Text Y
ry = getQueryVariable("ry")    // If true =>
x1 = getQueryVariable("x1")
y1 = getQueryVariable("y1")
tx1 = getQueryVariable("tx1")
ty1 = getQueryVariable("ty1")
t1d = getQueryVariable("t1d")
t2d = getQueryVariable("t1d")

if (t1d == false) {
   t1d = "points"
}
if (t2d == false) {
   t1d = "fit"
}
x1a = x1.split(",")
y1a = y1.split(",")
if (tx1 != false) {
   tx1a = tx1.split(",")
   ty1a = ty1.split(",")
   var trace2 = {
      x: tx1a,
      y: ty1a,
      mode: 'lines',
      type: 'scatter',
      name: t2d
   };
}


var trace1 = {
  x: x1a,
  y: y1a,
  name: t1d,
  mode: 'lines+markers',
  type: 'scatter'
};

 
var data = [trace1  ]

if (ry != false) {
   var layout = {
       title: {
         text: plot_title, 
         xref: 'x',
         yref: 'y', 
         x: 0.05,
       },
       height: 517,
       width: 850,
       xaxis:{
          title: {
            text: xat,
            font: {
               
               size: 18,
               color: '#7f7f7f'
            }
          }, 
          side:'right'
       },
       yaxis:{
          title: {
             text: yat,
             font: { 
               size: 18,
               color: '#7f7f7f'
             }
           },
           autorange: 'reversed' 
       },

    }
}
else {

   var layout = {
  title: {
    text: plot_title,
    font: { 
      size: 24
    },
    xref: 'paper',
    x: 0.05,
  },
       height: 517,
       width: 920,
       xaxis:{
       title: {
            text: xat,
            font: { 
               size: 18,
               color: '#7f7f7f'
            }
          },

           side:'left'
       },
       yaxis:{
           title: {
             text: yat,
             font: { 
               size: 18,
               color: '#7f7f7f'
             }
           },

           side: 'right'
       }
   }

}

Plotly.newPlot("myDiv", data, layout) 
if (tx1 != false) {
   Plotly.addTraces("myDiv", trace2)
}
</script>
