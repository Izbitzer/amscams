
 




<!--version-->
<!-- Other scripts (see gulpfile.js?{RAND} > js) -->


<!-- Should be combined and minified -->



<script src="https://archive.allsky.tv/APPS/src/js/plugins/fabric.js?{RAND}"></script>
 
<script src="https://archive.allsky.tv/APPS/src/js/mikes/freecal-ajax.js?{RAND}?c=dez"></script> 
<script src="https://archive.allsky.tv/APPS/src/js/mikes/goto.js?{RAND}"></script>

<script src="https://archive.allsky.tv/APPS/src/js/functions/loader-flask.js?{RAND}"></script>

<script src="https://archive.allsky.tv/APPS/src/js/functions/gallery_or_list.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/delete_detection_gallery.js?{RAND}"></script>

<script src="https://archive.allsky.tv/APPS/src/js/ui/display_buttons.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/ui/canvas-interactions.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/ui/canvas-zoom.js?{RAND}"></script>


<script src="https://archive.allsky.tv/APPS/src/js/ui/blinking_button.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/ui/frame_anim.js?{RAND}"></script> 
<script src="https://archive.allsky.tv/APPS/src/js/ui/gallery.js?{RAND}"></script> 
<script src="https://archive.allsky.tv/APPS/src/js/ui/lazy_load.js?{RAND}"></script> 

<script src="https://archive.allsky.tv/APPS/src/js/ui/thumb_anim.js?{RAND}"></script> 

<!-- Pagination -->
<script src="https://archive.allsky.tv/APPS/src/js/functions/pagination/per_page.js?{RAND}"></script>

<!-- Videos -->
<script src="https://archive.allsky.tv/APPS/src/js/functions/generate_timelapse.js?{RAND}"></script> 

<!-- Custom Videos -->
<script src="https://archive.allsky.tv/APPS/src/js/functions/generate_timelapse_full.js?{RAND}"></script> 
<script src="https://archive.allsky.tv/APPS/src/js/functions/delete_video.js?{RAND}"></script> 

<!-- Custom Logos -->
<script src="https://archive.allsky.tv/APPS/src/js/functions/upload_logo.js?{RAND}"></script> 

<!-- Add frames -->
<script src="https://archive.allsky.tv/APPS/src/js/functions/add_frames_from_select.js?{RAND}"></script> 
 
<!-- REDUCE TOOL (also for v2.0) -->
<script src="https://archive.allsky.tv/APPS/src/js/functions/reducepage/Radec_Mode.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/reducepage/Select_Meteor.js?{RAND}"></script>

<script src="https://archive.allsky.tv/APPS/src/js/functions/collapse_rows.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/select_cal_params.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/delete_frame-flask.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/select_meteor_flask.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/media_popup.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/reject_meteor-flask.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/update_star_list-flask.js?{RAND}"></script> 
<script src="https://archive.allsky.tv/APPS/src/js/functions/add_frames.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/reduce_meteor-flask.js?{RAND}"></script> 
<script src="https://archive.allsky.tv/APPS/src/js/functions/update_star_list_and_reduction.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/update_reduction-flask.js?{RAND}"></script> 
<script src="https://archive.allsky.tv/APPS/src/js/functions/reduction_table_actions.js?{RAND}"></script>


<script src="https://archive.allsky.tv/APPS/src/js/functions/select_meteor_gallery.js?{RAND}"></script>
<!--
<script src="https://archive.allsky.tv/APPS/src/js/functions/gallery_missing_images.js?{RAND}"></script>
-->

<script src="https://archive.allsky.tv/APPS/src/js/functions/date_picker.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/cam_picker.js?{RAND}"></script>

<!-- Free Cal -->
<script src="https://archive.allsky.tv/APPS/src/js/functions/find_stars.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/make_plate.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/solve_field.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/delete_calibration-flask.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/update_meteor_points_flask.js?{RAND}"></script>
<script src="https://archive.allsky.tv/APPS/src/js/functions/man_reduce-flask.js?{RAND}"></script>

  <script src="https://unpkg.com/jquery.terminal/js/jquery.terminal.min.js"></script>
  <link href="https://unpkg.com/jquery.terminal/css/jquery.terminal.min.css" rel="stylesheet"/>
<script>

String.prototype.strip = function(char) {
    return this.replace(new RegExp("^" + char + "*"), '').
        replace(new RegExp(char + "*$"), '');
}

$.extend_if_has = function(desc, source, array) {
    for (var i=array.length;i--;) {
        if (typeof source[array[i]] != 'undefined') {
            desc[array[i]] = source[array[i]];
        }
    }
    return desc;
};


(function($) {
    $.fn.tilda = function(eval, options) {
        if ($('body').data('tilda')) {
            return $('body').data('tilda').terminal;
        }
        this.addClass('tilda');
        options = options || {};
        eval = eval || function(command, term) {
            term.echo("you don't set eval for tilda");
        };
        var settings = {
            prompt: 'ASOS> ',
            name: 'tilda',
            height: 100,
            enabled: false,
            greetings: 'Hello there, welcome to the All Sky OS terminal. ',
            keypress: function(e) {
                if (e.which == 96) {
                    return false;
                }
            }
        };
        if (options) {
            $.extend(settings, options);
        }
        this.append('<div class="td"></div>');
        var self = this;
        self.terminal = this.find('.td').terminal(eval, settings);
        var focus = false;
        $(document.documentElement).keypress(function(e) {
            if (e.which == 96) {
                self.slideToggle('fast');
                self.terminal.focus(focus = !focus);
                self.terminal.attr({
                    scrollTop: self.terminal.attr("scrollHeight")
                });
            }
        });
        $('body').data('tilda', this);
        this.hide();
        return self;
    };
})(jQuery);

//--------------------------------------------------------------------------
jQuery(document).ready(function($) {

    $('#tilda').tilda(function(command, terminal) {
	args = command.split(" ")
	command = args[0]
	var len_args = args.length
        terminal.echo('you type command "' + command + '"');
	console.log(args)
	if (command == "hello") {
           console.log(command, terminal)
           terminal.echo('hi back at you.');
	}
	else if (command == "help" && len_args == 1) {
           $("#consoleModal").modal('show');
	   $("#console-content").html("<p>hello there...</p>")
           $('#tilda').hide();
           //$('body').data('tilda', this);
           //this.hide();
           //return self;
	}
	else if (command == "events") {
           var date = args[1]
	   console.log(date)
	   console.log(args)
	   el = date.split("_")
     
	   url = "https://archive.allsky.tv/EVENTS/" + el[0] + "/" + el[1] + "/" + el[2] + "/" + el[0] + "_" + el[1] + "_" + el[2] + "_OBS_GOOD.html"
	   console.log("URL", url)
           $.get( url, function( data ) {
           $("#consoleModal").modal('show');
	   $("#console-content").html(data)
           $('#tilda').hide();

           });
        } 

	// fetch content or API and put it in the modal


    });
});

</script>



<div class="d-flex flex-row justify-content-center align-items-center" >
    <div class="p-2">
        All Sky Observing Software
    </div>
</div>

<div class="d-flex flex-row justify-content-center align-items-center" >
    <div class="p-2">
        {VERSION_INFO}
    </div>
</div>

<div class="d-flex flex-row justify-content-center align-items-center" >
    <div class="p-2">
        {COPYWRITE}
    </div>
</div>

</html>
